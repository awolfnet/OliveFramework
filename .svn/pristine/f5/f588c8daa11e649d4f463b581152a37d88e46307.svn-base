using OliveFramework.Model.Datatable;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace OliveFramework.Controller
{
    public class Message: BaseController
    {
        public enum MESSAGE_STATUS
        {
            UNREACH = 0,
            UNREAD,
            REACH,
            READ,
        };

        public enum MESSAGE_TYPE
        {
            MAIL = 0,
            ALERT,
            CONFIG,
            EVENT,
            CHAT,
        };

        public enum MESSAGE_STYLE
        {
            CRITICAL = 0,
            QUESTION,
            EXCLAMATION,
            INFORMATION,
            
        };

        private static Message _instance = null;
        public static Message Instance
        {
            set
            {

            }
            get
            {
                if (_instance == null)
                {
                    _instance = new Message();
                }

                return _instance;
            }
        }

        /// <summary>
        /// 获取用户消息
        /// </summary>
        /// <param name="aid">用户ID</param>
        /// <param name="MessageStatus">消息状态</param>
        /// <returns></returns>
        public List<MessageModel> GetUserMessage(uint aid, MESSAGE_STATUS MessageStatus)
        {
            string where = string.Format("Message.Status={0} AND Message.aid={0} OR Message.aid=0", (int)MessageStatus,aid);
            return db.SelectData<MessageModel>("Message", where);
        }

        /// <summary>
        /// 获取用户消息
        /// </summary>
        /// <param name="aid">用户ID</param>
        /// <returns></returns>
        public List<MessageModel> GetUserMessage(uint aid)
        {
            string where = string.Format("Message.aid={0}", aid);
            return db.SelectData<MessageModel>("Message", where);
        }


    }
}